<Window x:Class="EOSK.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:EOSK"
        xmlns:components="clr-namespace:EOSK.Components"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        mc:Ignorable="d"
        Title="万物屏幕键盘" 
        Height="400" 
        Width="1000"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Opacity="1"
        Icon="Assets/Icons/logo.ico">
    <Window.Resources>
        <!-- 淡入淡出动画 -->
        <Storyboard x:Key="FadeOutStoryboard">
            <DoubleAnimation Storyboard.TargetName="MainContentArea"
                             Storyboard.TargetProperty="Opacity"
                             From="1.0" To="0.0"
                             Duration="0:0:0.15"/>
        </Storyboard>
        <Storyboard x:Key="FadeInStoryboard">
            <DoubleAnimation Storyboard.TargetName="MainContentArea"
                             Storyboard.TargetProperty="Opacity"
                             From="0.0" To="1.0"
                             Duration="0:0:0.15"/>
        </Storyboard>
        
        <!-- 滑动动画 -->
        <Storyboard x:Key="SlideInFromLeftStoryboard">
            <ThicknessAnimation Storyboard.TargetName="MainContentArea"
                                Storyboard.TargetProperty="Margin"
                                From="-50,0,0,0" To="0,0,0,0"
                                Duration="0:0:0.3">
                <ThicknessAnimation.EasingFunction>
                    <CircleEase EasingMode="EaseOut"/>
                </ThicknessAnimation.EasingFunction>
            </ThicknessAnimation>
            <DoubleAnimation Storyboard.TargetName="MainContentArea"
                             Storyboard.TargetProperty="Opacity"
                             From="0.0" To="1.0"
                             Duration="0:0:0.3"/>
        </Storyboard>
        
        <!-- 垂直滑动启动动画 -->
        <Storyboard x:Key="VerticalSlideStartupStoryboard">
            <ThicknessAnimation Storyboard.TargetProperty="Margin"
                                From="0,-600,0,0" To="0,0,0,0"
                                Duration="0:0:0.8">
                <ThicknessAnimation.EasingFunction>
                    <CircleEase EasingMode="EaseOut"/>
                </ThicknessAnimation.EasingFunction>
            </ThicknessAnimation>
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                             From="0.0" To="1.0"
                             Duration="0:0:0.8"/>
        </Storyboard>
        
        <!-- 最小化滑出动画 -->
        <Storyboard x:Key="MinimizeSlideOutStoryboard">
            <ThicknessAnimation Storyboard.TargetProperty="Margin"
                                From="0,0,0,0" To="0,600,0,0"
                                Duration="0:0:0.5">
                <ThicknessAnimation.EasingFunction>
                    <CircleEase EasingMode="EaseOut"/>
                </ThicknessAnimation.EasingFunction>
            </ThicknessAnimation>
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                             From="1.0" To="0.0"
                             Duration="0:0:0.5"/>
        </Storyboard>
        
        <!-- 关闭滑出动画 -->
        <Storyboard x:Key="CloseSlideOutStoryboard">
            <ThicknessAnimation Storyboard.TargetProperty="Margin"
                                From="0,0,0,0" To="0,-600,0,0"
                                Duration="0:0:0.5">
                <ThicknessAnimation.EasingFunction>
                    <CircleEase EasingMode="EaseOut"/>
                </ThicknessAnimation.EasingFunction>
            </ThicknessAnimation>
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                             From="1.0" To="0.0"
                             Duration="0:0:0.5"/>
        </Storyboard>
        
        <!-- 缓速函数 -->
        <CircleEase x:Key="CircleEase" EasingMode="EaseOut"/>
    </Window.Resources>
    
    <materialDesign:DialogHost>
        <Border Background="{DynamicResource MaterialDesignPaper}" 
                CornerRadius="10"
                BorderBrush="{DynamicResource MaterialDesignDivider}" 
                BorderThickness="1"
                Margin="10">
            <Border.Effect>
                <DropShadowEffect Color="Black" 
                                  ShadowDepth="3" 
                                  BlurRadius="10" 
                                  Opacity="0.3"/>
            </Border.Effect>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- 标题栏 -->
                <Border Grid.Row="0" 
                        Background="{DynamicResource TitleBarBackground}"
                        CornerRadius="10,10,0,0"
                        MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <!-- 应用标题 -->
                        <TextBlock Grid.Column="0" 
                                   Text="万物屏幕键盘" 
                                   Foreground="White"
                                   VerticalAlignment="Center"
                                   Margin="15,0,0,0"
                                   FontSize="16"
                                   FontWeight="Medium"/>
                        
                        <!-- 窗口控制按钮 -->
                        <StackPanel Grid.Column="1" 
                                    Orientation="Horizontal"
                                    Margin="0,0,10,0">
                            <Button x:Name="MinimizeButton"
                                    Style="{StaticResource MaterialDesignFlatButton}"
                                    Foreground="White"
                                    Click="MinimizeButton_Click"
                                    ToolTip="最小化">
                                <Button.Effect>
                                    <DropShadowEffect x:Name="MinimizeShadow" 
                                                      ShadowDepth="0" 
                                                      BlurRadius="10" 
                                                      Color="Yellow"
                                                      Opacity="0"/>
                                </Button.Effect>
                                <Button.Resources>
                                    <Storyboard x:Key="MinimizeButtonHoverOn">
                                        <DoubleAnimation Storyboard.TargetName="MinimizeShadow"
                                                         Storyboard.TargetProperty="Opacity"
                                                         From="0" To="1.0" Duration="0:0:0.1"/>
                                        <DoubleAnimation Storyboard.TargetName="MinimizeShadow"
                                                         Storyboard.TargetProperty="BlurRadius"
                                                         From="10" To="25" Duration="0:0:0.1"/>
                                    </Storyboard>
                                    <Storyboard x:Key="MinimizeButtonHoverOff">
                                        <DoubleAnimation Storyboard.TargetName="MinimizeShadow"
                                                         Storyboard.TargetProperty="Opacity"
                                                         From="1.0" To="0" Duration="0:0:0.1"/>
                                        <DoubleAnimation Storyboard.TargetName="MinimizeShadow"
                                                         Storyboard.TargetProperty="BlurRadius"
                                                         From="25" To="10" Duration="0:0:0.1"/>
                                    </Storyboard>
                                </Button.Resources>
                                <Button.Triggers>
                                    <EventTrigger RoutedEvent="Mouse.MouseEnter">
                                        <BeginStoryboard Storyboard="{StaticResource MinimizeButtonHoverOn}"/>
                                    </EventTrigger>
                                    <EventTrigger RoutedEvent="Mouse.MouseLeave">
                                        <BeginStoryboard Storyboard="{StaticResource MinimizeButtonHoverOff}"/>
                                    </EventTrigger>
                                </Button.Triggers>
                                <materialDesign:PackIcon Kind="WindowMinimize"/>
                            </Button>
                            
                            <Button x:Name="CloseButton"
                                    Style="{StaticResource MaterialDesignFlatButton}"
                                    Foreground="White"
                                    Click="CloseButton_Click"
                                    ToolTip="关闭">
                                <Button.Effect>
                                    <DropShadowEffect x:Name="CloseShadow" 
                                                      ShadowDepth="0" 
                                                      BlurRadius="10" 
                                                      Color="Yellow"
                                                      Opacity="0"/>
                                </Button.Effect>
                                <Button.Resources>
                                    <Storyboard x:Key="CloseButtonHoverOn">
                                        <DoubleAnimation Storyboard.TargetName="CloseShadow"
                                                         Storyboard.TargetProperty="Opacity"
                                                         From="0" To="1.0" Duration="0:0:0.1"/>
                                        <DoubleAnimation Storyboard.TargetName="CloseShadow"
                                                         Storyboard.TargetProperty="BlurRadius"
                                                         From="10" To="25" Duration="0:0:0.1"/>
                                    </Storyboard>
                                    <Storyboard x:Key="CloseButtonHoverOff">
                                        <DoubleAnimation Storyboard.TargetName="CloseShadow"
                                                         Storyboard.TargetProperty="Opacity"
                                                         From="1.0" To="0" Duration="0:0:0.1"/>
                                        <DoubleAnimation Storyboard.TargetName="CloseShadow"
                                                         Storyboard.TargetProperty="BlurRadius"
                                                         From="25" To="10" Duration="0:0:0.1"/>
                                    </Storyboard>
                                </Button.Resources>
                                <Button.Triggers>
                                    <EventTrigger RoutedEvent="Mouse.MouseEnter">
                                        <BeginStoryboard Storyboard="{StaticResource CloseButtonHoverOn}"/>
                                    </EventTrigger>
                                    <EventTrigger RoutedEvent="Mouse.MouseLeave">
                                        <BeginStoryboard Storyboard="{StaticResource CloseButtonHoverOff}"/>
                                    </EventTrigger>
                                </Button.Triggers>
                                <materialDesign:PackIcon Kind="WindowClose"/>
                            </Button>
                        </StackPanel>
                    </Grid>
                </Border>
                
                <!-- 主内容区域 -->
                <Border Grid.Row="1" 
                        Background="{DynamicResource MaterialDesignPaper}"
                        CornerRadius="0,0,10,10">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- 侧边栏 -->
                        <Border Grid.Column="0" 
                                Background="{DynamicResource MaterialDesignBackground}"
                                CornerRadius="0,0,0,10">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="2*"/>
                                </Grid.RowDefinitions>
                                
                                <ScrollViewer Grid.Row="1" 
                                              VerticalScrollBarVisibility="Auto"
                                              HorizontalAlignment="Stretch">
                                    <StackPanel x:Name="SidebarPanel" 
                                                Margin="0,20"
                                                VerticalAlignment="Center"/>
                                </ScrollViewer>
                            </Grid>
                        </Border>

                        <!-- 主内容区 -->
                        <Border Grid.Column="1" 
                                CornerRadius="0,0,10,0">
                            <Grid>
                                <ContentPresenter x:Name="MainContentArea" Opacity="1"/>
                                
                            </Grid>
                        </Border>
                        
                    </Grid>
                </Border>
            </Grid>
        </Border>
    </materialDesign:DialogHost>
</Window>